<%
	var rfl = require('rfl');
%>

<%
	var left = parseInt(Math.random() * (maxR - group.R));
	var top = parseInt(Math.random() * (maxR - group.R));
	var textWidth = maxR;
%>
<div class="group-map-cell" style="width: <%=maxR%>px; height: <%=maxR%>px;">
	<div data-index="<%=group.index%>" class="group-map-item group-map-item-hidden type-<%=group.type%> <%=group.selectable ? 'group-selectable' : ''%> <%=group.selected ? 'group-selected' : ''%>" style="width: <%=group.R%>px; height: <%=group.R%>px; margin-left: <%=left%>px; margin-top: <%=top%>px;" title="Open rate : <%=rfl.util.formatDecimal(group.openRate * 100, '0.00')%>%" data-toggle="tooltip">
		<div class="group-name group-text" style="width: <%=textWidth%>px; margin-left: <%=-textWidth / 2%>px"><%==group.name%></div>
		<div class="group-size group-text" style="width: <%=textWidth%>px; margin-left: <%=-textWidth / 2%>px">
			<%=group.customerAmount%>
		</div>
		<%if(selectable) {%>
			<div class="group-item-btn btn-select" data-rfl-click="select-group-map-item" title="Select"><i class="icon-ok"></i></div>
		<%}%>
		<%if(editable) {%>
			<div class="group-item-btn btn-left" data-rfl-click="edit-group-map-item" title="Edit"><i class="icon-pencil"></i></div>
		<%}%>
		<%if(editable) {%>
			<div class="group-item-btn btn-right" data-rfl-click="delete-group-map-item" title="Delete"><i class="icon-trash"></i></div>
		<%}%>
		<%if(manageable) {%>
			<div class="group-item-btn btn-top" data-rfl-click="group-map-import" title="Import customers"><i class="icon-upload"></i></div>
		<%}%>
		<%if(manageable) {%>
			<a class="group-item-btn btn-bottom" href="html/customer/group-customer-list-<%=G.LANG%>.html#!<%=listId%>/<%=group.id%>" title="View customers"><i class="icon-download"></i></a>
		<%}%>
	</div>
</div>